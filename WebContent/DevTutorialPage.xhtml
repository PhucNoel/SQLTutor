<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<f:event type="preRenderView" listener="#{devTutorialBean.devRedirect}" />
<h:head>
	<title>SQL Tutor</title>
	<ui:insert name="menu">
		<ui:include src="/samples/template-menubar.xhtml" />
	</ui:insert>
</h:head>
<h:body>

	<h:form>
		<div style="float: right; width: 70%;">
			<p:overlayPanel id="databasePanel" for="databaseButton" hideEffect="fade"> 
					<p:dataTable var="databaseTable"
						value="#{devTutorialBean.databaseSchema.databaseTables}">
						<p:column headerText="Table Names">
							<h:outputText value="#{databaseTable.tableName}" />
						</p:column>
						<p:column headerText="Column Names" style="width=200px; white-space: normal;">
							<h:outputText value="#{databaseTable.columnNames}" />
						</p:column>
					</p:dataTable>
			</p:overlayPanel> 
			
			<p:overlayPanel id="resultSetPanel" for="resultSetButton" hideEffect="fade"> 
					<p:dataTable id="resultsTable" var="row"
						value="#{devTutorialBean.queryResult.data}">
						<p:columns value="#{devTutorialBean.queryResult.columnNames}"
							var="column" columnIndexVar="columnIndex">
							<f:facet name="header">
									#{column}
								</f:facet>
								#{row[columnIndex]}
							</p:columns>
					</p:dataTable>
			</p:overlayPanel> 
	
			<p:commandButton id="databaseButton" value="DB SCHEMA" />
			<p:commandButton id="resultSetButton" value="RESULT SET" />
			<br/>
			<p:outputLabel id="feedbackNLP" value="#{devTutorialBean.feedbackNLP}"
				style="white-space: pre;" escape="false" />
		</div>
		<div style="float: left; width: 29%;">
			<p:outputLabel value="Custom:" />
			<br/>
			<p:inputTextarea rows="6" cols="35" id="query" reRender="results"
				styleClass="unresizable" value="#{devTutorialBean.query}" />
			<br/>
			<p:commandButton id="Process" value="Process"
				action="#{devTutorialBean.processSQL}" 
				update="feedbackNLP,:#{p:component('resultsTable')}" />
			<br/><br/>
			<p:outputLabel value="Pregenerated:" />
			<br/>
			<p:selectOneListbox id="pregeneratedQueries" style="height:200px">  
            </p:selectOneListbox> 
		</div>
	</h:form>
</h:body>
</html>